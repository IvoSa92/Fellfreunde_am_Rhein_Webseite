---
import { Image } from 'astro:assets';
import placeholderImageSrc from '../../assets/images/placeholder.svg';

type ImageMetadata = import('astro').ImageMetadata;

interface SchwerpunktItem {
  title: string;
  description: string;
  image?: ImageMetadata;
  imageAlt?: string;
}

interface Props {
  title?: string;
  description?: string;
  schwerpunkte: SchwerpunktItem[];
  sectionId?: string;
  imageWidth?: number;
  imageHeight?: number;
}

const {
  title = '',
  description = '',
  schwerpunkte,
  sectionId = 'schwerpunkte',
  imageWidth = 400,
  imageHeight = 400,
} = Astro.props;
---

<section id={sectionId} class="pt-32">
  <div
    class="bg-info/10 border-info/20 rounded-b-8xl mx-auto w-full max-w-screen-xl rounded-2xl border-6 px-4 py-16 md:px-16"
  >
    <div class="flex flex-col items-start justify-center gap-4 px-6 pb-8 md:px-16">
      <h2
        class="font-header text-base-content decoration-primary-content pb-4 text-3xl/tight text-balance underline underline-offset-6 sm:text-4xl/tight"
      >
        {title}
      </h2>
      <p class="text-base-content/80 max-w-4xl text-lg leading-relaxed text-pretty">
        {description}
      </p>
    </div>
    <div class="divider px-4 md:px-16"></div>
    <div class="flex flex-col items-center justify-center">
      <!-- Feature Card 1 -->
      {
        schwerpunkte.map((schwerpunkt, index) => (
          <>
            <div
              class={`flex flex-col items-center gap-8 p-6 md:flex-row md:items-stretch md:gap-8 md:p-12 ${index === 1 ? 'md:flex-row-reverse' : ''}`}
            >
              <div class="flex w-full flex-col items-start justify-center gap-2 md:w-auto md:max-w-md">
                <h3 class="pb-4 text-left text-3xl font-bold">{schwerpunkt.title}</h3>
                <p class="text-base-content/80 text-left text-lg leading-relaxed text-pretty">
                  {schwerpunkt.description}
                </p>
              </div>
              <div class="w-full flex-shrink-0 md:w-auto">
                <Image
                  src={schwerpunkt.image || placeholderImageSrc}
                  alt={schwerpunkt.imageAlt || ''}
                  width={imageWidth}
                  height={imageHeight}
                  format="webp"
                  class="placeholder-image h-full w-full max-w-xs rounded-2xl object-cover md:h-auto md:w-auto md:max-w-none"
                />
              </div>
            </div>
            {index < schwerpunkte.length - 1 && <div class="divider px-4 md:px-16" />}
          </>
        ))
      }
    </div>
  </div>
</section>
