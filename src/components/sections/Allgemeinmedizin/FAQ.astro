<section id="faq" class="pb-32">
  <svg
    class="cs-wave -mb-16"
    width="1920"
    height="167"
    viewBox="0 0 1920 167"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M1920 167H0V0C111.116 45.3334 456.485 136 951 136C1445.52 136 1803.21 45.3334 1920 0V167Z"
      fill="white"
    >
    </path>
  </svg>
  <svg
    class="cs-wave mt-12 rotate-180"
    width="1920"
    height="167"
    viewBox="0 0 1920 167"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M1920 167H0V0C111.116 45.3334 456.485 136 951 136C1445.52 136 1803.21 45.3334 1920 0V167Z"
      fill="white"
    >
    </path>
  </svg>
  <div class="bg-base-100 mx-auto w-full max-w-screen-xl rounded-2xl pb-16">
    <div>
      <h2 class="mx-auto pb-16 text-center text-3xl font-bold">FAQ - Häufig gestellte Fragen</h2>
    </div>

    <div class="flex flex-col gap-6 md:flex-row">
      <div class="flex w-full flex-col gap-6 overflow-hidden">
        <div
          class="faq-card hover:bg-primary/10 flex flex-col items-start justify-start rounded-lg border border-slate-200 bg-white p-3 hover:cursor-pointer"
        >
          <button
            type="button"
            aria-disabled="false"
            class="faq-button group flex h-auto w-full min-w-[38px] items-center justify-between gap-2 overflow-hidden rounded-lg stroke-slate-500 p-0 text-left align-middle text-sm leading-tight font-semibold whitespace-pre-wrap text-black transition-all duration-300 ease-in-out hover:cursor-pointer hover:opacity-80 disabled:cursor-not-allowed disabled:stroke-slate-400 disabled:text-slate-400"
            id="faq-btn-1"
            aria-expanded="false"
            aria-controls="faq-content-1"
          >
            <div>
              <div class="flex w-full items-center justify-start gap-2">
                <p class="md:text-md w-full text-base font-medium">
                  Wie oft sollte ich mein Tier zur Vorsorgeuntersuchung bringen?
                </p>
              </div>
            </div>
            <div class="size-5">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="stroke-black transition-transform duration-300 ease-in-out"
              >
                <path d="M5.83325 8.33325L9.99992 12.4999L14.1666 8.33325"></path>
              </svg>
            </div>
          </button>
          <div
            id="faq-content-1"
            role="region"
            aria-hidden="true"
            aria-labelledby="faq-btn-1"
            class="grid w-full grid-rows-[0fr] text-justify text-xs text-slate-600 opacity-0 transition-[grid-template-rows,opacity] duration-300 ease-out md:pr-7"
          >
            <div class="overflow-hidden">
              <p class="text-sm/relaxed text-pretty">
                Regelmäßige Vorsorgeuntersuchungen sind essentiell für die Gesundheit Ihres Tieres.
                <strong>Junge Tiere</strong> sollten jährlich untersucht werden, während
                <strong>Senioren ab 7 Jahren</strong> halbjährlich zur Kontrolle kommen sollten. Bei
                <strong>chronischen Erkrankungen</strong> oder besonderen Risiken können häufigere Termine
                notwendig sein. So können wir gesundheitliche Probleme frühzeitig erkennen und behandeln.
              </p>
            </div>
          </div>
        </div>
        <div
          class="faq-card hover:bg-primary/10 flex flex-col items-start justify-start rounded-lg border border-slate-200 bg-white p-3 hover:cursor-pointer"
        >
          <button
            type="button"
            aria-disabled="false"
            class="faq-button group flex h-auto w-full min-w-[38px] items-center justify-between gap-2 overflow-hidden rounded-lg stroke-slate-500 p-0 text-left align-middle text-sm leading-tight font-semibold whitespace-pre-wrap text-black transition-all duration-300 ease-in-out hover:cursor-pointer hover:opacity-80 disabled:cursor-not-allowed disabled:stroke-slate-400 disabled:text-slate-400"
            id="faq-btn-2"
            aria-expanded="false"
            aria-controls="faq-content-2"
          >
            <div>
              <div class="flex w-full items-center justify-start gap-2">
                <p class="md:text-md w-full text-base font-medium">
                  Was passiert bei einer allgemeinen Untersuchung?
                </p>
              </div>
            </div>
            <div class="size-5">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="stroke-black transition-transform duration-300 ease-in-out"
              >
                <path d="M5.83325 8.33325L9.99992 12.4999L14.1666 8.33325"></path>
              </svg>
            </div>
          </button>
          <div
            id="faq-content-2"
            role="region"
            aria-hidden="true"
            aria-labelledby="faq-btn-2"
            class="grid w-full grid-rows-[0fr] text-xs text-slate-600 opacity-0 transition-[grid-template-rows,opacity] duration-300 ease-out md:pr-7"
          >
            <div class="overflow-hidden">
              <p class="text-sm/relaxed text-pretty">
                Eine allgemeine Untersuchung bei uns umfasst eine <strong>
                  gründliche körperliche Untersuchung
                </strong> von Kopf bis Schwanz. Wir prüfen Augen, Ohren, Zähne und Maulhöhle, hören Herz
                und Lunge ab, tasten den Bauch ab und untersuchen das Bewegungsapparat. Zusätzlich besprechen
                wir mit Ihnen die <strong>Gesundheitsgeschichte</strong>
                Ihres Tieres, Ernährung, Verhalten und Haltungsbedingungen. Bei Bedarf führen wir
                <strong>Laboruntersuchungen</strong> durch oder empfehlen weiterführende Diagnostik.
              </p>
            </div>
          </div>
        </div>
        <div
          class="faq-card hover:bg-primary/10 flex flex-col items-start justify-start rounded-lg border border-slate-200 bg-white p-3 hover:cursor-pointer"
        >
          <button
            type="button"
            aria-disabled="false"
            class="faq-button group flex h-auto w-full min-w-[38px] items-center justify-between gap-2 overflow-hidden rounded-lg stroke-slate-500 p-0 text-left align-middle text-sm leading-tight font-semibold whitespace-pre-wrap text-black transition-all duration-300 ease-in-out hover:cursor-pointer hover:opacity-80 disabled:cursor-not-allowed disabled:stroke-slate-400 disabled:text-slate-400"
            id="faq-btn-3"
            aria-expanded="false"
            aria-controls="faq-content-3"
          >
            <div>
              <div class="flex w-full items-center justify-start gap-2">
                <p class="md:text-md w-full text-base font-medium">
                  Welche Impfungen benötigt mein Tier?
                </p>
              </div>
            </div>
            <div class="size-5">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="stroke-black transition-transform duration-300 ease-in-out"
              >
                <path d="M5.83325 8.33325L9.99992 12.4999L14.1666 8.33325"></path>
              </svg>
            </div>
          </button>
          <div
            id="faq-content-3"
            role="region"
            aria-hidden="true"
            aria-labelledby="faq-btn-3"
            class="grid w-full grid-rows-[0fr] text-xs text-slate-600 opacity-0 transition-[grid-template-rows,opacity] duration-300 ease-out md:pr-7"
          >
            <div class="overflow-hidden">
              <p class="text-sm/relaxed text-pretty">
                Der <strong>Impfplan</strong> richtet sich nach Art, Alter, Lebensumständen und Reisegewohnheiten
                Ihres Tieres. Bei <strong>Hunden</strong> gehören die Grundimpfungen gegen Staupe, Hepatitis,
                Parvovirose und Tollwut zu den Standardimpfungen. <strong>Welpen</strong> erhalten ihre
                Grundimmunisierung ab der 8. Lebenswoche, während <strong>erwachsene Tiere</strong> je
                nach Impfstoff alle 1-3 Jahre aufgefrischt werden müssen. Wir beraten Sie gerne individuell
                über den für Ihr Tier optimalen Impfplan.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="flex w-full flex-col gap-6 overflow-hidden">
        <div
          class="faq-card hover:bg-primary/10 flex flex-col items-start justify-start rounded-lg border border-slate-200 bg-white p-3 hover:cursor-pointer"
        >
          <button
            type="button"
            aria-disabled="false"
            class="faq-button group flex h-auto w-full min-w-[38px] items-center justify-between gap-2 overflow-hidden rounded-lg stroke-slate-500 p-0 text-left align-middle text-sm leading-tight font-semibold whitespace-pre-wrap text-black transition-all duration-300 ease-in-out hover:cursor-pointer hover:opacity-80 disabled:cursor-not-allowed disabled:stroke-slate-400 disabled:text-slate-400"
            id="faq-btn-4"
            aria-expanded="false"
            aria-controls="faq-content-4"
          >
            <div>
              <div class="flex w-full items-center justify-start gap-2">
                <p class="md:text-md w-full text-base font-medium">
                  Wann sollte ich einen Notfalltermin vereinbaren?
                </p>
              </div>
            </div>
            <div class="size-5">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="stroke-black transition-transform duration-300 ease-in-out"
              >
                <path d="M5.83325 8.33325L9.99992 12.4999L14.1666 8.33325"></path>
              </svg>
            </div>
          </button>
          <div
            id="faq-content-4"
            role="region"
            aria-hidden="true"
            aria-labelledby="faq-btn-4"
            class="grid w-full grid-rows-[0fr] text-justify text-xs text-slate-600 opacity-0 transition-[grid-template-rows,opacity] duration-300 ease-out md:pr-7"
          >
            <div class="overflow-hidden">
              <p class="text-sm/relaxed text-pretty">
                Ein <strong>Notfalltermin</strong> ist notwendig bei lebensbedrohlichen Situationen oder
                akuten, schwerwiegenden Symptomen. Dazu gehören <strong>
                  Atemnot oder Bewusstlosigkeit
                </strong>, schwere Verletzungen mit starken Blutungen,
                <strong>Vergiftungen</strong>, Krampfanfälle, <strong>plötzliche Lähmungen</strong>,
                starke Schmerzen,
                <strong>anhaltendes Erbrechen oder Durchfall</strong> sowie das <strong>
                  Nicht-Urinieren
                </strong>. Bei Unsicherheit rufen Sie uns bitte an – wir beraten Sie gerne, ob ein
                sofortiger Termin notwendig ist.
              </p>
            </div>
          </div>
        </div>
        <div
          class="faq-card hover:bg-primary/10 flex flex-col items-start justify-start rounded-lg border border-slate-200 bg-white p-3 hover:cursor-pointer"
        >
          <button
            type="button"
            aria-disabled="false"
            class="faq-button group flex h-auto w-full min-w-[38px] items-center justify-between gap-2 overflow-hidden rounded-lg stroke-slate-500 p-0 text-left align-middle text-sm leading-tight font-semibold whitespace-pre-wrap text-black transition-all duration-300 ease-in-out hover:cursor-pointer hover:opacity-80 disabled:cursor-not-allowed disabled:stroke-slate-400 disabled:text-slate-400"
            id="faq-btn-5"
            aria-expanded="false"
            aria-controls="faq-content-5"
          >
            <div>
              <div class="flex w-full items-center justify-start gap-2">
                <p class="md:text-md w-full text-base font-medium">
                  Wie kann ich die Zähne meines Tieres gesund halten?
                </p>
              </div>
            </div>
            <div class="size-5">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="stroke-black transition-transform duration-300 ease-in-out"
              >
                <path d="M5.83325 8.33325L9.99992 12.4999L14.1666 8.33325"></path>
              </svg>
            </div>
          </button>
          <div
            id="faq-content-5"
            role="region"
            aria-hidden="true"
            aria-labelledby="faq-btn-5"
            class="grid w-full grid-rows-[0fr] text-xs text-slate-600 opacity-0 transition-[grid-template-rows,opacity] duration-300 ease-out md:pr-7"
          >
            <div class="overflow-hidden">
              <p class="text-sm/relaxed text-pretty">
                Die <strong>Zahnpflege</strong> ist ein wichtiger Bestandteil der Gesundheit Ihres Tieres.
                Tägliches <strong>Zähneputzen</strong> mit spezieller Tierzahnpasta ist ideal, kann aber
                schrittweise eingeführt werden. Zusätzlich helfen
                <strong>kauaktive Spielzeuge</strong>, spezielle Zahnpflege-Snacks und
                <strong>trockenes Futter</strong> dabei, Zahnbelag mechanisch zu entfernen. Regelmäßige
                <strong>zahnärztliche Kontrollen</strong> – mindestens einmal jährlich – ermöglichen
                die frühzeitige Erkennung von Problemen.
              </p>
            </div>
          </div>
        </div>
        <div
          class="faq-card hover:bg-primary/10 flex flex-col items-start justify-start rounded-lg border border-slate-200 bg-white p-3 hover:cursor-pointer"
        >
          <button
            type="button"
            aria-disabled="false"
            class="faq-button group flex h-auto w-full min-w-[38px] items-center justify-between gap-2 overflow-hidden rounded-lg stroke-slate-500 p-0 text-left align-middle text-sm leading-tight font-semibold whitespace-pre-wrap text-black transition-all duration-300 ease-in-out hover:cursor-pointer hover:opacity-80 disabled:cursor-not-allowed disabled:stroke-slate-400 disabled:text-slate-400"
            id="faq-btn-6"
            aria-expanded="false"
            aria-controls="faq-content-6"
          >
            <div>
              <div class="flex w-full items-center justify-start gap-2">
                <p class="md:text-md w-full text-base font-medium">Was kostet eine Behandlung?</p>
              </div>
            </div>
            <div class="size-5">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="stroke-black transition-transform duration-300 ease-in-out"
              >
                <path d="M5.83325 8.33325L9.99992 12.4999L14.1666 8.33325"></path>
              </svg>
            </div>
          </button>
          <div
            id="faq-content-6"
            role="region"
            aria-hidden="true"
            aria-labelledby="faq-btn-6"
            class="grid w-full grid-rows-[0fr] text-xs text-slate-600 opacity-0 transition-[grid-template-rows,opacity] duration-300 ease-out md:pr-7"
          >
            <div class="overflow-hidden">
              <p class="text-sm/relaxed text-pretty">
                Die Kosten einer Behandlung variieren je nach Art und Umfang der Leistung. Eine <strong
                >
                  allgemeine Untersuchung
                </strong> kostet in der Regel zwischen 40-60€, während <strong>
                  komplexere Behandlungen
                </strong> oder Operationen entsprechend mehr kosten können. Wir informieren Sie vor jeder
                Behandlung über die voraussichtlichen Kosten und erstellen bei größeren Eingriffen einen
                schriftlichen Kostenvoranschlag. Viele Leistungen werden von Tierkrankenversicherungen
                übernommen – wir helfen Ihnen gerne bei der Abrechnung.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Find all accordion buttons
    const accordionButtons = document.querySelectorAll<HTMLElement>('[aria-controls]');

    // Function to synchronize button heights for closed cards
    const synchronizeButtonHeights = () => {
      const closedButtons = Array.from(accordionButtons).filter(
        (btn) => btn.getAttribute('aria-expanded') === 'false'
      ) as HTMLElement[];

      if (closedButtons.length === 0) return;

      // Reset heights to auto to get natural height
      closedButtons.forEach((btn) => {
        btn.style.minHeight = 'auto';
      });

      // Get the maximum height
      const maxHeight = Math.max(...closedButtons.map((btn) => btn.offsetHeight));

      // Set all closed buttons to the same height
      closedButtons.forEach((btn) => {
        btn.style.minHeight = `${maxHeight}px`;
      });
    };

    accordionButtons.forEach((button) => {
      const contentId = button.getAttribute('aria-controls');
      if (!contentId) return;

      const content = document.getElementById(contentId);
      if (!content) return;

      // Function to toggle accordion
      const toggleAccordion = () => {
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        const icon = button.querySelector('svg');

        if (isExpanded) {
          // Close accordion
          button.setAttribute('aria-expanded', 'false');
          content.setAttribute('aria-hidden', 'true');
          content.classList.remove('grid-rows-[1fr]', 'opacity-100');
          content.classList.add('grid-rows-[0fr]', 'opacity-0');
          if (icon) {
            icon.classList.remove('rotate-180');
          }
          // Reset button height and synchronize closed buttons
          button.style.minHeight = 'auto';
          setTimeout(synchronizeButtonHeights, 50);
        } else {
          // Open accordion - remove height constraint on this button
          button.style.minHeight = 'auto';
          button.setAttribute('aria-expanded', 'true');
          content.setAttribute('aria-hidden', 'false');
          content.classList.remove('grid-rows-[0fr]', 'opacity-0');
          content.classList.add('grid-rows-[1fr]', 'opacity-100');
          if (icon) {
            icon.classList.add('rotate-180');
          }
          // Synchronize remaining closed buttons
          setTimeout(synchronizeButtonHeights, 50);
        }
      };

      // Add click listener to button
      button.addEventListener('click', toggleAccordion);

      // Add click listener to content area - only close when expanded
      content.addEventListener('click', (e) => {
        if (button.getAttribute('aria-expanded') === 'true') {
          toggleAccordion();
        }
      });
    });

    // Initial synchronization
    synchronizeButtonHeights();

    // Also synchronize on window resize
    let resizeTimeout: ReturnType<typeof setTimeout> | undefined;
    window.addEventListener('resize', () => {
      if (resizeTimeout) clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(synchronizeButtonHeights, 100);
    });
  });
</script>
